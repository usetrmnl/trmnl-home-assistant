name: "TRMNL HA"
description: "Send dashboard screens to your TRMNL"
version: "0.6.9"
slug: "trmnl-ha"
url: "https://github.com/usetrmnl/trmnl-home-assistant"
image: ghcr.io/usetrmnl/trmnl-ha-{arch}
# NOTE: Uncomment after setting up Codenotary signing in CI
# codenotary: dev@usetrmnl.com
homeassistant_api: true
init: false
apparmor: false # TODO: Enable after apparmor is tested. Disabling for now to resolve "audit backlog limit exceeded" warnings
watchdog: "http://[HOST]:10000/health"
arch:
  - aarch64
  - amd64
stage: stable

# Enable ingress for sidebar integration
# NOTE: ingress_port must match DEFAULT_SERVER_PORT in const.ts
ingress: true
ingress_port: 10000
ingress_stream: false

# Sidebar integration
panel_icon: "mdi:monitor"
panel_title: "TRMNL HA"

# Keep ports for backward compatibility (optional direct access)
ports:
  10000/tcp: 10000
ports_description:
  10000/tcp: "Web UI and API (direct access)"

# Configuration options
options:
  access_token: ""
  home_assistant_url: "http://homeassistant:8123"
  timezone: ""
  keep_browser_open: false
  debug_logging: false
  server_port: 10000

# Schema for options validation
schema:
  access_token: str
  home_assistant_url: str?
  timezone: str?
  keep_browser_open: bool?
  debug_logging: bool?
  server_port: "int(1024,65535)?"

# Exclude regeneratable data from HA backups
backup_exclude:
  - "*/logs/*"
  - "*/output/*"
